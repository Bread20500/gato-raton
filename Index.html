<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego del Gato y el Rat贸n</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos personalizados para el juego */
        body {
            font-family: 'Inter', sans-serif;
            cursor: none; /* Oculta el cursor nativo para que solo se vea el rat贸n de juguete */
        }
        .game-area {
            position: relative;
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* Asegura que los elementos no salgan del 谩rea visible */
            background: #fcfcfc; /* Fondo blanco suave */
        }
        .chaser, .target {
            position: absolute;
            font-size: 3rem; /* Tama帽o de los emojis */
            transition: transform 0.05s linear; /* Peque帽a transici贸n para suavizar el movimiento del rat贸n */
            user-select: none;
            pointer-events: none; /* Ignora el rat贸n en la interacci贸n para que el cursor siempre se capture en el body */
        }

        /* Estilo para el gatito que persigue */
        .chaser {
            transition: none; /* La l贸gica de JS maneja el movimiento, no queremos CSS transition */
        }

        /* Indicador de carga/inicio */
        #loading-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            color: #4f46e5;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="gameArea" class="game-area">
        <!-- El rat贸n de juguete (target) -->
        <div id="mouse" class="target"></div>

        <!-- El gatito (chaser) -->
        <div id="cat" class="chaser"></div>

        <div id="loading-message" class="p-4 bg-white shadow-lg rounded-xl">
            隆Mueve el cursor para que el rat贸n huya del gato!
        </div>
    </div>

    <script>
        // Variables globales para los elementos y la posici贸n
        const cat = document.getElementById('cat');
        const mouse = document.getElementById('mouse');
        const loadingMessage = document.getElementById('loading-message');
        const gameArea = document.getElementById('gameArea');

        // Posiciones iniciales del rat贸n (cursor) y del gato
        let targetX = window.innerWidth / 2;
        let targetY = window.innerHeight / 2;
        let catX = 50;
        let catY = 50;

        // Velocidad de la persecuci贸n (cuanto menor, m谩s lento y suave persigue el gato)
        const chaseSpeed = 0.05;

        // Funci贸n para actualizar la posici贸n del rat贸n de juguete (que sigue al cursor)
        function updateTargetPosition(e) {
            // Obtiene la posici贸n del cursor en el viewport
            targetX = e.clientX;
            targetY = e.clientY;
            
            // Mueve instant谩neamente el rat贸n de juguete a la posici贸n del cursor
            // Ajustamos por la mitad del tama帽o del emoji (3rem * 16px/rem / 2)
            mouse.style.transform = `translate(${targetX - 24}px, ${targetY - 24}px)`;

            // Oculta el mensaje de inicio una vez que el usuario interact煤a
            if (loadingMessage) {
                loadingMessage.classList.add('hidden');
            }
        }

        // Funci贸n de animaci贸n para el movimiento del gato
        function animateCat() {
            // Calcula la distancia hacia el objetivo (rat贸n)
            const dx = targetX - catX;
            const dy = targetY - catY;

            // Mueve la posici贸n actual del gato hacia el objetivo, usando la velocidad de persecuci贸n
            catX += dx * chaseSpeed;
            catY += dy * chaseSpeed;

            // Aplica la nueva posici贸n con una peque帽a rotaci贸n para simular la direcci贸n
            // Calcula el 谩ngulo de rotaci贸n (en radianes)
            const angle = Math.atan2(dy, dx); 
            // Convierte a grados y a帽ade 90 grados para orientar la "cabeza" del emoji hacia adelante
            const rotation = angle * (180 / Math.PI) + 90; 

            // Aplica la transformaci贸n CSS: traslaci贸n y rotaci贸n
            // Ajustamos por la mitad del tama帽o del emoji
            cat.style.transform = 
                `translate(${catX - 24}px, ${catY - 24}px) rotate(${rotation}deg)`;

            // Solicita la siguiente animaci贸n
            requestAnimationFrame(animateCat);
        }

        // Event listener para capturar el movimiento del cursor en toda el 谩rea
        document.addEventListener('mousemove', updateTargetPosition);

        // Inicializa la animaci贸n del gato una vez que la ventana se ha cargado
        window.onload = function() {
            // Coloca el gato en una posici贸n inicial aleatoria
            catX = Math.random() * (window.innerWidth - 50);
            catY = Math.random() * (window.innerHeight - 50);
            
            // Inicia el bucle de animaci贸n
            animateCat(); 
        };
    </script>
</body>
</html>
